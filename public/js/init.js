(() => {
  // ns-hugo:E:\Sites\Hugo\HBS\themes\github.com\hbstack\header\modules\theme-toggle\assets\hb\modules\header-theme-toggle\init\index.ts
  (() => {
    "use strict";
    const THEME_AUTO = "auto";
    const THEME_DARK = "dark";
    const THEME_LIGHT = "light";
    const THEME_KEY = "hb-theme";
    const getPreferredTheme = () => {
      return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? THEME_DARK : THEME_LIGHT;
    };
    const getTheme = () => {
      const v = localStorage.getItem(THEME_KEY);
      return v ? v : THEME_AUTO;
    };
    const setTheme = (theme2, save = false) => {
      save && localStorage.setItem(THEME_KEY, theme2);
      const value = theme2 === THEME_AUTO ? getPreferredTheme() : theme2;
      document.documentElement.setAttribute("data-bs-theme", value);
      onSet(value);
    };
    const onSet = (theme2) => {
      const event = new CustomEvent("hb:theme", { detail: { theme: theme2 } });
      document.dispatchEvent(event);
    };
    const activeTheme = (theme2) => {
      let name = "";
      document.querySelectorAll("[data-bs-theme-value]").forEach((toggle) => {
        if (toggle.getAttribute("data-bs-theme-value") === theme2) {
          toggle.classList.add("active");
          name = toggle.getAttribute("data-bs-theme-name") ?? "";
        } else {
          toggle.classList.remove("active");
        }
      });
      const newIcon = document.body.querySelector(`[data-bs-theme-value="${theme2}"] svg`)?.cloneNode(true);
      const oldIcon = document.body.querySelector(".btn-theme-toggle svg");
      oldIcon?.replaceWith(newIcon);
      const nameEle = document.querySelector(".theme-toggle .theme-name");
      nameEle.innerHTML = name;
    };
    const theme = getTheme();
    setTheme(theme);
    window.addEventListener("DOMContentLoaded", () => {
      activeTheme(theme);
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
        if (getTheme() !== THEME_AUTO) {
          return;
        }
        setTheme(e.matches ? THEME_DARK : THEME_LIGHT);
      });
      const activeToggle = (toggle) => {
        const v = toggle.getAttribute("data-bs-theme-value");
        const theme2 = v ? v : THEME_AUTO;
        setTheme(theme2, true);
        activeTheme(theme2);
      };
      const toggles = document.querySelectorAll("[data-bs-theme-value]");
      toggles.forEach((toggle) => {
        toggle.addEventListener("click", () => {
          activeToggle(toggle);
        });
      });
      const btnToggle = document.querySelector(".btn-theme-toggle");
      if (btnToggle !== null && btnToggle.getAttribute("data-style") === "switch") {
        btnToggle.addEventListener("click", () => {
          let next = 0;
          toggles.forEach((toggle, i) => {
            if (toggle.classList.contains("active")) {
              next = i + 1;
              return;
            }
          });
          if (next >= toggles.length) {
            next = 0;
          }
          activeToggle(toggles[next]);
        });
      }
    });
  })();
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibnMtaHVnbzpFOlxcU2l0ZXNcXEh1Z29cXEhCU1xcdGhlbWVzXFxnaXRodWIuY29tXFxoYnN0YWNrXFxoZWFkZXJcXG1vZHVsZXNcXHRoZW1lLXRvZ2dsZVxcYXNzZXRzXFxoYlxcbW9kdWxlc1xcaGVhZGVyLXRoZW1lLXRvZ2dsZVxcaW5pdFxcaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIigoKSA9PiB7XG4gICAgJ3VzZSBzdHJpY3QnXG5cbiAgICBjb25zdCBUSEVNRV9BVVRPID0gJ2F1dG8nXG4gICAgY29uc3QgVEhFTUVfREFSSyA9ICdkYXJrJ1xuICAgIGNvbnN0IFRIRU1FX0xJR0hUID0gJ2xpZ2h0J1xuXG4gICAgY29uc3QgVEhFTUVfS0VZID0gJ2hiLXRoZW1lJ1xuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzeXN0ZW0ncyBwcmVmZXJyZWQgdGhlbWUuXG4gICAgICogXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBjb25zdCBnZXRQcmVmZXJyZWRUaGVtZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzID8gVEhFTUVfREFSSyA6IFRIRU1FX0xJR0hUXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgdGhlbWUuXG4gICAgICogXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBjb25zdCBnZXRUaGVtZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCB2ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKVxuICAgICAgICByZXR1cm4gdiA/IHYgOiBUSEVNRV9BVVRPXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0aGVtZSB3aXRoIHRoZSBnaXZlbiB0aGVtZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNhdmUgd2hldGhlciB0byBzYXZlIGl0IHRvIGxvY2FsU3RvcmFnZS5cbiAgICAgKi9cbiAgICBjb25zdCBzZXRUaGVtZSA9ICh0aGVtZTogc3RyaW5nLCBzYXZlID0gZmFsc2UpID0+IHtcbiAgICAgICAgc2F2ZSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSEVNRV9LRVksIHRoZW1lKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoZW1lID09PSBUSEVNRV9BVVRPID8gZ2V0UHJlZmVycmVkVGhlbWUoKSA6IHRoZW1lXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUnLCB2YWx1ZSlcbiAgICAgICAgb25TZXQodmFsdWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pdHMgYSBjdXN0b20gZXZlbnQgb24gdGhlbWUgY2hhbmdlLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSBcbiAgICAgKi9cbiAgICBjb25zdCBvblNldCA9ICh0aGVtZSkgPT4ge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnaGI6dGhlbWUnLCB7IGRldGFpbDogeyB0aGVtZTogdGhlbWUgfSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWN0aXZlIGN1cnJlbnQgdGhlbWUncyBpY29uLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSBcbiAgICAgKi9cbiAgICBjb25zdCBhY3RpdmVUaGVtZSA9ICh0aGVtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGxldCBuYW1lID0gJydcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYnMtdGhlbWUtdmFsdWVdJykuZm9yRWFjaCgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS1icy10aGVtZS12YWx1ZScpID09PSB0aGVtZSkge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgICAgICAgICAgIG5hbWUgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lLW5hbWUnKSA/PyAnJ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyBzeW5jIHRoZW1lIGljb24uXG4gICAgICAgIGNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWJzLXRoZW1lLXZhbHVlPVwiJHt0aGVtZX1cIl0gc3ZnYCk/LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudFxuICAgICAgICBjb25zdCBvbGRJY29uID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuYnRuLXRoZW1lLXRvZ2dsZSBzdmcnKVxuICAgICAgICBvbGRJY29uPy5yZXBsYWNlV2l0aChuZXdJY29uKVxuICAgICAgICAvLyBzeW5jIHRoZW1lIG5hbWUuXG4gICAgICAgIGNvbnN0IG5hbWVFbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGhlbWUtdG9nZ2xlIC50aGVtZS1uYW1lJykgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgbmFtZUVsZS5pbm5lckhUTUwgPSBuYW1lXG4gICAgfVxuXG4gICAgY29uc3QgdGhlbWUgPSBnZXRUaGVtZSgpXG4gICAgLy8gU2V0IHRoZSBkYXRhIGF0dHJpYnV0ZSBBU0FQLCBpbiBvcmRlciB0byBhdm9pZCBmbGlja2VyaW5nLlxuICAgIHNldFRoZW1lKHRoZW1lKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgIC8vIEFjdGl2ZSB0aGUgdGhlbWUncyBpY29uIG9uIHBhZ2UgbG9hZC5cbiAgICAgICAgYWN0aXZlVGhlbWUodGhlbWUpXG5cbiAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGdldFRoZW1lKCkgIT09IFRIRU1FX0FVVE8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRE8gTk9UIHNhdmUgdGhlIHRoZW1lLlxuICAgICAgICAgICAgc2V0VGhlbWUoZS5tYXRjaGVzID8gVEhFTUVfREFSSyA6IFRIRU1FX0xJR0hUKVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVRvZ2dsZSA9ICh0b2dnbGU6IEVsZW1lbnQpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lLXZhbHVlJylcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gdiA/IHYgOiBUSEVNRV9BVVRPXG4gICAgICAgICAgICBzZXRUaGVtZSh0aGVtZSwgdHJ1ZSlcbiAgICAgICAgICAgIGFjdGl2ZVRoZW1lKHRoZW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJzLXRoZW1lLXZhbHVlXScpXG4gICAgICAgIHRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRvZ2dsZSh0b2dnbGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGJ0blRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tdGhlbWUtdG9nZ2xlJylcbiAgICAgICAgaWYgKGJ0blRvZ2dsZSAhPT0gbnVsbCAmJiBidG5Ub2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXN0eWxlJykgPT09ICdzd2l0Y2gnKSB7XG4gICAgICAgICAgICBidG5Ub2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSAwXG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKCh0b2dnbGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZ2dsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gaSsxXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gdG9nZ2xlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWN0aXZlVG9nZ2xlKHRvZ2dsZXNbbmV4dF0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn0pKClcbiJdLAogICJtYXBwaW5ncyI6ICI7O0FBQUEsR0FBQyxNQUFNO0FBQ0g7QUFFQSxVQUFNLGFBQWE7QUFDbkIsVUFBTSxhQUFhO0FBQ25CLFVBQU0sY0FBYztBQUVwQixVQUFNLFlBQVk7QUFPbEIsVUFBTSxvQkFBb0IsTUFBYztBQUNwQyxhQUFPLE9BQU8sY0FBYyxPQUFPLFdBQVcsOEJBQThCLEVBQUUsVUFBVSxhQUFhO0FBQUEsSUFDekc7QUFPQSxVQUFNLFdBQVcsTUFBYztBQUMzQixZQUFNLElBQUksYUFBYSxRQUFRLFNBQVM7QUFDeEMsYUFBTyxJ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
